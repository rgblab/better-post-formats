jQuery(function(i){"use strict";i(document).ready(function(){a.init(),t.init()}),i(window).load(function(){a.init(),t.init()});var t={init:function(){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;i.fn.attrChange=function(e){if(n){var t={attributes:!0,attributeFilter:["class"],subtree:!1},i=new n(function(t){t.forEach(function(t){e.call(t.target)})});return this.each(function(){i.observe(this,t)})}},i(".edit-post-sidebar__panel-tabs ul li:first-child button").attrChange(function(){i(this).hasClass("is-active")&&a.init()})}},a={init:function(){var t=i(".editor-post-format").find("select"),e=i("#post-formats-select").find("input");t.length&&a.gutenbergEditorHandler(t),e.length&&a.classicEditorHandler(e)},gutenbergEditorHandler:function(t){t.find("option").each(function(){i(this).is(":selected")?a.setMetaBoxVisibility("show",i(this).val()):a.setMetaBoxVisibility("hide",i(this).val())}),t.on("change",function(){a.gutenbergEditorHandler(t)})},classicEditorHandler:function(t){t.each(function(){i(this).is(":checked")?a.setMetaBoxVisibility("show",i(this).val()):a.setMetaBoxVisibility("hide",i(this).val())}),t.on("click",function(){a.classicEditorHandler(t)})},setMetaBoxVisibility:function(t,e){"hide"===t&&i("#upf_"+e).hide(),"show"===t&&i("#upf_"+e).fadeIn()}}}),jQuery(function(a){"use strict";a(document).ready(function(){n.init(),n.makeSortable()});var n={init:function(){var t=a(".upf-control--gallery");t.length&&t.each(function(){a(document).on("click",".upf-control__add",function(t){t.preventDefault(),n.getMediaFrame(a(this),!0)}),a(document).on("click",".upf-control__replace",function(t){t.preventDefault(),n.getMediaFrame(a(this),!1)}),a(document).on("click",".upf-control__remove",function(t){t.preventDefault(),n.removeItem(a(this))})})},getMediaFrame:function(e,t){var i="";i&&i.open(),i=wp.media.frames.mediaFrame=wp.media({title:e.data("uploader-title"),button:{text:e.data("uploader-button-text")},library:{type:"image"},multiple:t}),e.hasClass("upf-control__add")&&(i.on("select",function(){var n=a(".upf-control__gallery li").index(a(".upf-control__gallery li:last"));i.state().get("selection").map(function(t,e){var i=n+(e+1+1);t=t.toJSON(),a(".upf-control__gallery").append('<li><input type="hidden" name="upf-gallery['+i+']" value="'+t.id+'"><img class="upf-control__image" src="'+t.sizes.thumbnail.url+'"><a class="upf-control__replace" href="#" data-uploader-title="Replace image" data-uploader-button-text="Replace image"><span class="dashicons dashicons-edit"></span></a><a class="upf-control__remove" href="#"><span class="dashicons dashicons-trash"></span></a></li>')})}),n.makeSortable()),e.hasClass("upf-control__replace")&&i.on("select",function(){var t=i.state().get("selection").first().toJSON();e.parent().find("input:hidden").attr("value",t.id),e.parent().find(".upf-control__image").attr("src",t.sizes.thumbnail.url)}),i.open()},removeItem:function(t){t.parents("li").fadeOut(400,function(){a(this).remove(),n.resetIndex()})},resetIndex:function(){a(".upf-control__gallery li").each(function(t){a(this).find("input:hidden").attr("name","upf-gallery["+(t+1)+"]")})},makeSortable:function(){a(".upf-control__gallery").sortable({opacity:.6,stop:function(){n.resetIndex()}})}}});