jQuery(function(n){"use strict";n(document).ready(function(){i.init()}),n(window).load(function(){i.init()});var i={init:function(){var t=n(".editor-post-format").find("select"),e=n("#post-formats-select").find("input");t.length&&i.gutenbergEditorHandler(t),e.length&&i.classicEditorHandler(e)},gutenbergEditorHandler:function(t){t.find("option").each(function(){n(this).is(":selected")?i.setMetaBoxVisibility("show",n(this).val()):i.setMetaBoxVisibility("hide",n(this).val())}),t.on("change",function(){i.gutenbergEditorHandler(t)})},classicEditorHandler:function(t){t.each(function(){n(this).is(":checked")?i.setMetaBoxVisibility("show",n(this).val()):i.setMetaBoxVisibility("hide",n(this).val())}),t.on("click",function(){i.classicEditorHandler(t)})},setMetaBoxVisibility:function(t,e){"hide"===t&&n("#upf_"+e).hide(),"show"===t&&n("#upf_"+e).fadeIn()}}}),jQuery(function(a){"use strict";a(document).ready(function(){i.init(),i.makeSortable()});var i={init:function(){var t=a(".upf-control--gallery");t.length&&t.each(function(){a(document).on("click",".upf-control__add",function(t){t.preventDefault(),i.getMediaFrame(a(this),!0)}),a(document).on("click",".upf-control__replace",function(t){t.preventDefault(),i.getMediaFrame(a(this),!1)}),a(document).on("click",".upf-control__remove",function(t){t.preventDefault(),i.removeItem(a(this))})})},getMediaFrame:function(e,t){var n="";n&&n.open(),n=wp.media.frames.mediaFrame=wp.media({title:e.data("uploader-title"),button:{text:e.data("uploader-button-text")},library:{type:"image"},multiple:t}),e.hasClass("upf-control__add")&&(n.on("select",function(){var i=a(".upf-control__gallery li").index(a(".upf-control__gallery li:last"));n.state().get("selection").map(function(t,e){var n=i+(e+1+1);t=t.toJSON(),a(".upf-control__gallery").append('<li><input type="hidden" name="upf-gallery['+n+']" value="'+t.id+'"><img class="upf-control__image" src="'+t.sizes.thumbnail.url+'"><a class="upf-control__replace" href="#" data-uploader-title="Replace image" data-uploader-button-text="Replace image"><span class="dashicons dashicons-edit"></span></a><a class="upf-control__remove" href="#"><span class="dashicons dashicons-trash"></span></a></li>')})}),i.makeSortable()),e.hasClass("upf-control__replace")&&n.on("select",function(){var t=n.state().get("selection").first().toJSON();e.parent().find("input:hidden").attr("value",t.id),e.parent().find(".upf-control__image").attr("src",t.sizes.thumbnail.url)}),n.open()},removeItem:function(t){t.parents("li").fadeOut(400,function(){a(this).remove(),i.resetIndex()})},resetIndex:function(){a(".upf-control__gallery li").each(function(t){a(this).find("input:hidden").attr("name","upf-gallery["+(t+1)+"]")})},makeSortable:function(){a(".upf-control__gallery").sortable({opacity:.6,stop:function(){i.resetIndex()}})}}});