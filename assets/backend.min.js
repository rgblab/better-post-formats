jQuery(function(i){"use strict";i(window).load(function(){n.init(),t.init()});var n={init:function(){var t=i(".editor-post-format").find("select"),e=i("#post-formats-select").find("input");t.length&&n.gutenbergEditorHandler(t),e.length&&n.classicEditorHandler(e)},gutenbergEditorHandler:function(t){t.find("option").each(function(){i(this).is(":selected")?n.setMetaBoxVisibility("show",i(this).val()):n.setMetaBoxVisibility("hide",i(this).val())}),t.on("change",function(){n.gutenbergEditorHandler(t)})},classicEditorHandler:function(t){t.each(function(){i(this).is(":checked")?n.setMetaBoxVisibility("show",i(this).val()):n.setMetaBoxVisibility("hide",i(this).val())}),t.on("click",function(){n.classicEditorHandler(t)})},setMetaBoxVisibility:function(t,e){"hide"===t&&i("#bpf_"+e).hide(),"show"===t&&i("#bpf_"+e).fadeIn()}},t={init:function(){var t,e=i(".edit-post-sidebar__panel-tabs ul li:first-child button");e.length&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)&&(t=e[0],new MutationObserver(function(t){t.forEach(function(t){e.hasClass("is-active")&&n.init()})}).observe(t,{attributes:!0,attributeFilter:["class"],subtree:!1}))}}}),jQuery(function(a){"use strict";a(document).ready(function(){i.init(),i.makeSortable()});var i={init:function(){var t=a(".bpf-control--gallery");t.length&&t.each(function(){a(document).on("click",".bpf-control__add",function(t){t.preventDefault(),i.getMediaFrame(a(this),!0)}),a(document).on("click",".bpf-control__replace",function(t){t.preventDefault(),i.getMediaFrame(a(this),!1)}),a(document).on("click",".bpf-control__remove",function(t){t.preventDefault(),i.removeItem(a(this))})})},getMediaFrame:function(e,t){var n="";n&&n.open(),n=wp.media.frames.mediaFrame=wp.media({title:e.data("uploader-title"),button:{text:e.data("uploader-button-text")},library:{type:"image"},multiple:t}),e.hasClass("bpf-control__add")&&(n.on("select",function(){var i=a(".bpf-control__gallery li").index(a(".bpf-control__gallery li:last"));n.state().get("selection").map(function(t,e){e=i+(e+1+1);t=t.toJSON(),a(".bpf-control__gallery").append('<li><input type="hidden" name="bpf-gallery['+e+']" value="'+t.id+'"><img class="bpf-control__image" src="'+t.sizes.thumbnail.url+'"><a class="bpf-control__replace" href="#" data-uploader-title="'+backendLabels.uploaderTitle+'" data-uploader-button-text="'+backendLabels.uploaderButtonText+'"><span class="dashicons dashicons-edit"></span></a><a class="bpf-control__remove" href="#"><span class="dashicons dashicons-trash"></span></a></li>')})}),i.makeSortable()),e.hasClass("bpf-control__replace")&&n.on("select",function(){var t=n.state().get("selection").first().toJSON();e.parent().find("input:hidden").attr("value",t.id),e.parent().find(".bpf-control__image").attr("src",t.sizes.thumbnail.url)}),n.open()},removeItem:function(t){t.parents("li").fadeOut(400,function(){a(this).remove(),i.resetIndex()})},resetIndex:function(){a(".bpf-control__gallery li").each(function(t){a(this).find("input:hidden").attr("name","bpf-gallery["+(t+1)+"]")})},makeSortable:function(){a(".bpf-control__gallery").sortable({opacity:.6,stop:function(){i.resetIndex()}})}}});