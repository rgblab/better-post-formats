jQuery(function(n){"use strict";n(window).load(function(){a.init(),t.init()});var a={init:function(){var t=n(".editor-post-format").find("select"),e=n("#post-formats-select").find("input");t.length&&a.gutenbergEditorHandler(t),e.length&&a.classicEditorHandler(e)},gutenbergEditorHandler:function(t){t.find("option").each(function(){n(this).is(":selected")?a.setMetaBoxVisibility("show",n(this).val()):a.setMetaBoxVisibility("hide",n(this).val())}),t.on("change",function(){a.gutenbergEditorHandler(t)})},classicEditorHandler:function(t){t.each(function(){n(this).is(":checked")?a.setMetaBoxVisibility("show",n(this).val()):a.setMetaBoxVisibility("hide",n(this).val())}),t.on("click",function(){a.classicEditorHandler(t)})},setMetaBoxVisibility:function(t,e){"hide"===t&&n("#bpf_"+e).hide(),"show"===t&&n("#bpf_"+e).fadeIn()}},t={init:function(){var e=n(".edit-post-sidebar__panel-tabs ul li:first-child button");if(e.length){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(t){var i=e[0];(t=new MutationObserver(function(t){t.forEach(function(t){e.hasClass("is-active")&&a.init()})})).observe(i,{attributes:!0,attributeFilter:["class"],subtree:!1})}}}}}),jQuery(function(a){"use strict";a(document).ready(function(){n.init(),n.makeSortable()});var n={init:function(){var t=a(".bpf-control--gallery");t.length&&t.each(function(){a(document).on("click",".bpf-control__add",function(t){t.preventDefault(),n.getMediaFrame(a(this),!0)}),a(document).on("click",".bpf-control__replace",function(t){t.preventDefault(),n.getMediaFrame(a(this),!1)}),a(document).on("click",".bpf-control__remove",function(t){t.preventDefault(),n.removeItem(a(this))})})},getMediaFrame:function(e,t){var i="";i&&i.open(),i=wp.media.frames.mediaFrame=wp.media({title:e.data("uploader-title"),button:{text:e.data("uploader-button-text")},library:{type:"image"},multiple:t}),e.hasClass("bpf-control__add")&&(i.on("select",function(){var n=a(".bpf-control__gallery li").index(a(".bpf-control__gallery li:last"));i.state().get("selection").map(function(t,e){var i=n+(e+1+1);t=t.toJSON(),a(".bpf-control__gallery").append('<li><input type="hidden" name="bpf-gallery['+i+']" value="'+t.id+'"><img class="bpf-control__image" src="'+t.sizes.thumbnail.url+'"><a class="bpf-control__replace" href="#" data-uploader-title="'+backendLabels.uploaderTitle+'" data-uploader-button-text="'+backendLabels.uploaderButtonText+'"><span class="dashicons dashicons-edit"></span></a><a class="bpf-control__remove" href="#"><span class="dashicons dashicons-trash"></span></a></li>')})}),n.makeSortable()),e.hasClass("bpf-control__replace")&&i.on("select",function(){var t=i.state().get("selection").first().toJSON();e.parent().find("input:hidden").attr("value",t.id),e.parent().find(".bpf-control__image").attr("src",t.sizes.thumbnail.url)}),i.open()},removeItem:function(t){t.parents("li").fadeOut(400,function(){a(this).remove(),n.resetIndex()})},resetIndex:function(){a(".bpf-control__gallery li").each(function(t){a(this).find("input:hidden").attr("name","bpf-gallery["+(t+1)+"]")})},makeSortable:function(){a(".bpf-control__gallery").sortable({opacity:.6,stop:function(){n.resetIndex()}})}}});